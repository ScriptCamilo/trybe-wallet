(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{23:function(e,t,a){e.exports={container:"styles_container__QDtPk",logo:"styles_logo__XVMrR",loginSection:"styles_loginSection__2X9L6"}},24:function(e,t,a){e.exports={container:"styles_container__oepDj",email:"styles_email__3GV55",expenses:"styles_expenses__1ZRSQ"}},28:function(e,t,a){e.exports={inputBox:"styles_inputBox__nUoT-",inputField:"styles_inputField__h5SI7"}},29:function(e,t,a){e.exports={selectBox:"styles_selectBox__QHjAd",selectField:"styles_selectField__38Av6",inputField:"styles_inputField__oN7Zo"}},30:function(e,t,a){e.exports={table:"table_table__38_oH",buttons:"table_buttons__2V2Qx"}},36:function(e,t,a){e.exports={button:"styles_button__3pqej"}},39:function(e,t,a){e.exports={formField:"styles_formField__2PflU"}},41:function(e,t,a){e.exports={container:"styles_container__2MJvq"}},44:function(e,t,a){e.exports=a(56)},53:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(21),c=a.n(l),o=a(26),s=a(9);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(53);var i=a(3),u=a(16),d=a(4),p=a(5),m=a(6),h=a(13),b=a(8),E=a(7),v=a(38),f=a(37),O=a(17),j=a.n(O),y=a(20);function x(){return g.apply(this,arguments)}function g(){return(g=Object(y.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(e){return{type:"ADD_EXPENSES",payload:e}},C=function(e){return{type:"RECEIVED_CURRENCIES_ERROR",payload:e}},S=a(28),k=a.n(S),R=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelName,a=e.placeholder,n=e.dataTestid,l=e.name,c=e.onChange,o=e.type,s=e.value,i=e.checked;return r.a.createElement("label",{htmlFor:l,className:k.a.inputBox},t,r.a.createElement("input",{className:k.a.inputField,id:l,value:s,"data-testid":n,name:l,onChange:function(e){return c(e)},type:o,placeholder:a,checked:i}))}}]),a}(r.a.Component);R.defaultProps={dataTestid:"",placeholder:"",type:"text",labelName:"",checked:!1};var w=R,N=a(36),D=a.n(N);function T(e){var t=e.children,a=e.disabled,n=e.onClick,l=e.dataTestId,c=e.id;return r.a.createElement("button",{"data-testid":l,className:D.a.button,type:"submit",disabled:a,onClick:function(e){return n(c>=0?c:e)}},t)}T.defaultProps={dataTestId:"",disabled:!1,id:void 0};var F=T,I=a(23),L=a.n(I),U=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.state={email:"",password:"",isValidate:{email:!1,password:!1}},e}return Object(m.a)(a,[{key:"validateUser",value:function(e,t){return"email"===t?/\S+@\S+\.\S+/.test(e):e.length>=6}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState((function(e){var a,l=e.isValidate;return a={},Object(u.a)(a,n,r),Object(u.a)(a,"isValidate",Object(d.a)(Object(d.a)({},l),{},Object(u.a)({},n,t.validateUser(r,n)))),a}))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,a=t.email,n=t.password,r=this.props,l=r.dispatchUser,c=r.history;l({email:a,password:n}),this.setState({email:"",password:""}),c.push("/carteira")}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,l=t.isValidate,c=l.email,o=l.password;return r.a.createElement("main",{className:L.a.container},r.a.createElement(f.a,{className:L.a.logo}),r.a.createElement("form",{className:L.a.loginSection},r.a.createElement(w,{value:a,dataTestid:"email-input",name:"email",onChange:function(t){return e.handleChange(t)},type:"text",placeholder:"Email"}),r.a.createElement(w,{value:n,dataTestid:"password-input",name:"password",onChange:function(t){return e.handleChange(t)},type:"password",placeholder:"Password"}),r.a.createElement(F,{disabled:!(c&&o),onClick:this.handleSubmit},r.a.createElement("span",null,"ENTRAR")," ",r.a.createElement(v.a,null))))}}]),a}(r.a.Component),V=Object(s.b)(null,(function(e){return{dispatchUser:function(t){return e((a=t,function(e){e({type:"RECEIVED_USER_LOGIN",payload:a})}));var a}}}))(U);var A=function(e){if(!e.length)return 0;var t=e.reduce((function(e,t){var a=t.currency;return e+t.value*parseFloat(t.exchangeRates[a].ask)}),0);return parseFloat(t.toFixed(2))},B=a(24),M=a.n(B),P=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.user.email,a=e.expenses,n=e.isLoading;return console.log(a),r.a.createElement("header",{className:M.a.container},r.a.createElement("h1",null,"TRYBEWALLET"),r.a.createElement("div",null,r.a.createElement("p",{className:M.a.email,"data-testid":"email-field"},t),r.a.createElement("p",{className:M.a.expenses,"data-testid":"total-field"},n?"Loading...":"Despesa total: R$".concat(A(a)),r.a.createElement("span",{"data-testid":"header-currency-field"}," BRL"))))}}]),a}(r.a.Component),Q=Object(s.b)((function(e){return{user:e.user,isLoading:e.wallet.isLoading,expenses:e.wallet.expenses}}))(P),X=a(39),W=a.n(X),z=[{dataTestid:"",name:"value",type:"number",labelName:"Valor:"},{dataTestid:"",name:"description",labelName:"Descri\xe7\xe3o:"}],G=[{select:"",name:"currency",labelName:"Moeda:",options:void 0},{select:"",name:"method",labelName:"M\xe9todo de pagamento:",options:[{text:"Dinheiro",value:"Dinheiro"},{text:"Cart\xe3o de cr\xe9dito",value:"Cart\xe3o de cr\xe9dito"},{text:"Cart\xe3o de d\xe9bito",value:"Cart\xe3o de d\xe9bito"}]},{select:"",name:"tag",labelName:"Tag:",options:[{text:"Alimenta\xe7\xe3o",value:"Alimenta\xe7\xe3o"},{text:"Lazer",value:"Lazer"},{text:"Trabalho",value:"Trabalho"},{text:"Transporte",value:"Transporte"},{text:"Sa\xfade",value:"Sa\xfade"}]}],J=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.text;return r.a.createElement("option",{value:t},a)}}]),a}(r.a.Component),q=a(29),H=a.n(q),Z=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.select,a=e.name,n=e.labelName,l=e.options,c=e.value,o=e.onChange;return r.a.createElement("label",{htmlFor:a,className:H.a.selectBox},n,r.a.createElement("select",{className:H.a.selectField,"data-testid":t,id:a,name:a,value:c,onChange:o},l.map((function(e){return r.a.createElement(J,Object.assign({key:e.value},e))}))))}}]),a}(r.a.Component),$=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).getCurrenciesOptions=e.getCurrenciesOptions.bind(Object(h.a)(e)),e.getState=e.getState.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(h.a)(e)),e.state={value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(m.a)(a,[{key:"getCurrenciesOptions",value:function(){return this.props.currencies.map((function(e){return{text:e.code,value:e.code}}))}},{key:"getState",value:function(){var e=this.state;return{value:e.value,description:e.description,currency:e.currency,method:e.method,tag:e.tag}}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleSubmit",value:function(e){e.preventDefault(),(0,this.props.addExpense)(this.state),this.setState({value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:W.a.formField},z.map((function(t){var a=e.getState()[t.name];return r.a.createElement(w,Object.assign({key:t.name},t,{value:a,onChange:e.handleChange}))})),G.map((function(t){var a=e.getState()[t.name],n=t.options;return n||(n=e.getCurrenciesOptions()),r.a.createElement(Z,Object.assign({key:t.text},t,{options:n,value:a,onChange:e.handleChange}))})),r.a.createElement(F,{onClick:this.handleSubmit},"Adicionar despesa"))}}]),a}(r.a.Component),Y=Object(s.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{addExpense:function(t){return e(function(e){return function(){var t=Object(y.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUEST_CURRENCIES"}),t.prev=1,t.next=4,x();case 4:n=t.sent,r=Object(d.a)(Object(d.a)({},e),{},{exchangeRates:n}),a(_(r)),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),a(C("Erro ao buscar currencies"));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))($),K=a(40),ee=a(30),te=a.n(ee),ae=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleDelete=e.handleDelete.bind(Object(h.a)(e)),e}return Object(m.a)(a,[{key:"handleDelete",value:function(e){(0,this.props.deleteExpense)(e)}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("table",{className:te.a.table},r.a.createElement("tr",null,r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")),t.map((function(t,a){var n=t.value,l=t.currency,c=t.exchangeRates[l],o=c.name.split("/")[0],s=parseFloat(c.ask),i=n*s;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.value),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,o),r.a.createElement("td",null,s.toFixed(2)),r.a.createElement("td",null,i.toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",{className:te.a.buttons},r.a.createElement(F,{id:t.id,onClick:e.handleDelete,dataTestId:"delete-btn"},r.a.createElement(K.a,null))))})))}}]),a}(r.a.Component),ne=Object(s.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e({type:"DELETE_EXPENSES",payload:t})}}}))(ae),re=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchData)()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(Y,null),r.a.createElement(ne,null))}}]),a}(r.a.Component),le=Object(s.b)(null,(function(e){return{fetchData:function(){return e(function(){var e=Object(y.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:a=e.sent,n=Object.values(a).filter((function(e){return"BRLT"!==e.codein})),t({type:"RECEIVED_CURRENCIES",payload:n}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t(C("Erro ao buscar currencies"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}}}))(re),ce=a(41),oe=a.n(ce),se=[{path:"/",exact:!0,component:V},{path:"/carteira",exact:!0,component:le}];var ie=Object(s.b)((function(e){return e}),null)((function(){return r.a.createElement("main",{className:oe.a.container},r.a.createElement(i.c,null,se.map((function(e,t){return r.a.createElement(i.a,Object.assign({key:t},e))}))))}));var ue=function(){return r.a.createElement(ie,null)},de=a(15),pe=a(42),me=a(43),he={email:"",password:""};var be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"RECEIVED_USER_LOGIN":return Object(d.a)(Object(d.a)({},e),n);default:return e}},Ee={currencies:[],expenses:[],totalExpense:0,isLoading:!1,error:null};var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"REQUEST_CURRENCIES":var r=e.expenses,l=A(r);return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0,error:null,totalExpense:l});case"RECEIVED_CURRENCIES":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,error:null,currencies:n});case"ADD_EXPENSES":var c=e.expenses.length,o=e.expenses[c]?e.expenses[c].id:c-1;n.id=o?c:o+1;var s=e.expenses.concat(n),i=A(s);return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,error:null,expenses:s,totalExpense:i});case"RECEIVED_CURRENCIES_ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:n});case"DELETE_EXPENSES":var u=e.expenses.find((function(e){return e.id===n})),p=e.expenses.filter((function(e){return e.id!==n})),m=u.value,h=u.currency,b=u.exchangeRates[h],E=parseFloat(b.ask),v=m*E,f=parseFloat((e.totalExpense-v).toFixed(2));return Object(d.a)(Object(d.a)({},e),{},{expenses:p,totalExpense:f});default:return Object(d.a)({},e)}},fe=Object(de.combineReducers)({user:be,wallet:ve}),Oe=Object(de.createStore)(fe,Object(pe.composeWithDevTools)(Object(de.applyMiddleware)(me.a)));c.a.render(r.a.createElement(o.a,null,r.a.createElement(s.a,{store:Oe},r.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[44,1,2]]]);
//# sourceMappingURL=main.b855dd24.chunk.js.map